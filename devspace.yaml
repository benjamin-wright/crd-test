version: v1beta6
images:
  pipeline-monitor:
    image: localhost:31500/pipeline-monitor
    dockerfile: ./operators/pipeline-monitor/Dockerfile
    context: ./operators/pipeline-monitor

deployments:
- name: crds
  helm:
    chart:
      name: deployment/crds
- name: operators
  helm:
    chart:
      name: deployment/operators
    values:
      pipeline-monitor:
        image: localhost:31500/pipeline-monitor

commands:
- name: deploy
  command: devspace deploy
- name: init
  command: ./scripts/start.sh
- name: clean
  command: ./scripts/stop.sh
- name: add-pipeline
  command: kubectl apply -f tests/pipeline.yaml
- name: remove-pipeline
  command: kubectl delete -f tests/pipeline.yaml