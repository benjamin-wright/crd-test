apiVersion: "minion.ponglehub.com/v1"
kind: Pipeline
metadata:
  name: my-pipeline
spec:
  resources:
  - name: git-resource
    trigger: true
    secrets:
    - name: my-config
      keys:
      - key: id-rsa.pub
        path: /root/.ssh
    env:
      REPO: git@github.com:username/repo.git
  steps:
  - name: Load source
    resource: my-resource
    action: GET
    path: some/sub/path
  - name: Install deps
    image: docker.io/node
    command:
    - npm run install
  - name: Run tests
    image: docker.io/node
    command:
    - npm run test